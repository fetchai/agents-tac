
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Registration Phase &#8212; TAC 0.1.2 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    <script type="text/javascript" src="https://unpkg.com/mermaid@7.1.0/dist/mermaid.min.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Trading Phase" href="trading_phase.html" />
    <link rel="prev" title="Introduction" href="introduction.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="registration-phase">
<span id="id1"></span><h1>Registration Phase<a class="headerlink" href="#registration-phase" title="Permalink to this headline">¶</a></h1>
<p>In this section, we describe the <em>registration phase</em>,
during which the participant can register their own agent
for the competition.</p>
<p>To do so, the participant must register with the <em>controller agent</em>
that will be running and be connected to the OEF throughout the duration
of the competition.</p>
<p>At the end of the registration time, the controller
generates the game data for every participant (that is, the initial
good holdings and the utility parameters for the goods).
Then, the agent can start to negotiate and
to submit transactions to the controller agent.</p>
<p>In the following sections, we will explain:</p>
<ul class="simple">
<li><p>the initial setup of the controller agent;</p></li>
<li><p>how to register/unregister to TAC;</p></li>
<li><p>how the trading phase will start;</p></li>
<li><p>how to handle errors (e.g. potential disconnection from the network)</p></li>
</ul>
<div class="section" id="setup-of-the-controller-agent">
<h2>Setup of the controller agent<a class="headerlink" href="#setup-of-the-controller-agent" title="Permalink to this headline">¶</a></h2>
<p>Before the registration phase starts, the organizer
of the TAC will run the <em>controller agent</em>, which is
a special agent that manages the TAC. Specifically, the main tasks are:</p>
<ol class="arabic simple">
<li><p>Handling of registration/unregistration of the participants.</p></li>
<li><p>Generating the game data for each agent and triggering the start of the competition.</p></li>
<li><p>Accepting/Rejecting valid/invalid transactions submitted by the trading agents.</p></li>
<li><p>Providing agents with state updates (e.g. when the agent reconnects after a disconnection)</p></li>
</ol>
</div>
<div class="section" id="register-as-tac-service">
<h2>Register as ‘tac’ service<a class="headerlink" href="#register-as-tac-service" title="Permalink to this headline">¶</a></h2>
<p>The controller agent registers itself to the OEF as a service.</p>
<p>The data model name is <code class="docutils literal notranslate"><span class="pre">&quot;tac&quot;</span></code> and as attribute we have <code class="docutils literal notranslate"><span class="pre">&quot;version&quot;</span></code>,
which is an integer value. The TAC controller agent will register with <code class="docutils literal notranslate"><span class="pre">&quot;version&quot;=1</span></code>.</p>
<p>The controller agent will wait for <em>registration_timeout</em>. At the end, if there are enough
participant, it will start the competition. Otherwise, it will send back a “Cancelled” message to every
registered participant</p>
<div class="figure align-center" id="id2">

            <style>
            /* mermaid issue 527 workaround */
            .section {
                opacity: 1.0 !important;
            }
            </style>
            <script>mermaid.initialize({startOnLoad:true});</script><div class="mermaid">
            sequenceDiagram
    participant OEF
    participant Controller

    Note right of Controller: register as a controller agent.

    Controller-&gt;&gt;OEF: register_service(&quot;tac&quot;, Description{version=1})
    Controller-&gt;&gt;Controller: run()
    activate Controller
    deactivate Controller

    Note right of Controller: Waiting for 'Register' messages from TAC agents, until 'start time'.
        </div><p class="caption"><span class="caption-text">The setup of the controller agent.</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="how-to-register-unregister">
<h2>How to register/unregister<a class="headerlink" href="#how-to-register-unregister" title="Permalink to this headline">¶</a></h2>
<p>In order to complete a registration, a trading agent should do the following steps:</p>
<ol class="arabic simple">
<li><p>Run a search for <code class="docutils literal notranslate"><span class="pre">&quot;tac&quot;</span></code> services, with the query <code class="docutils literal notranslate"><span class="pre">&quot;version&quot;</span> <span class="pre">==</span> <span class="pre">1</span></code>.</p></li>
<li><p>On the search result, send a <a class="reference internal" href="../reference/api/tac.platform.html#tac.platform.protocol.Register" title="tac.platform.protocol.Register"><code class="xref py py-class docutils literal notranslate"><span class="pre">Register</span></code></a> message to the right TAC controller</p></li>
<li><p>Waiting for the <a class="reference internal" href="../reference/api/tac.platform.html#tac.platform.protocol.GameData" title="tac.platform.protocol.GameData"><code class="xref py py-class docutils literal notranslate"><span class="pre">GameData</span></code></a> message.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All the communications toward the controller agent must be done
by using the <a class="reference external" href="https://fetchai.github.io/oef-sdk-python/oef.html#oef.agents.Agent.send_message">send_message</a>,
that is, to send the general-purpose message in the OEF. In the following, we will see what kind of content the
message should have in order to be understandable by the controller agent.</p>
<p>E.g. for sending a <a class="reference internal" href="../reference/api/tac.platform.html#tac.platform.protocol.Register" title="tac.platform.protocol.Register"><code class="xref py py-class docutils literal notranslate"><span class="pre">Register</span></code></a> message, you should first serialize the object by using
<a class="reference internal" href="../reference/api/tac.platform.html#tac.platform.protocol.Message.serialize" title="tac.platform.protocol.Message.serialize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">serialize()</span></code></a>, and then send the byte-encoded message in a simple message.</p>
</div>
<div class="section" id="search-for-controller-agent">
<h3>Search for controller agent<a class="headerlink" href="#search-for-controller-agent" title="Permalink to this headline">¶</a></h3>
<div class="figure align-center" id="id3">

            <style>
            /* mermaid issue 527 workaround */
            .section {
                opacity: 1.0 !important;
            }
            </style>
            <div class="mermaid">
            sequenceDiagram
	participant Agent
    participant OEF
    participant Controller

    activate Controller
    Agent-&gt;&gt;OEF: search_services(&quot;tac&quot;, version==1)
    OEF-&gt;&gt;Agent: search result: [&quot;Controller&quot;]
    deactivate Controller
        </div><p class="caption"><span class="caption-text">TAC Agent search for controller agents.</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="register-to-tac">
<h3>Register to TAC<a class="headerlink" href="#register-to-tac" title="Permalink to this headline">¶</a></h3>
<p>In order to register, a TAC Agent must send a <a class="reference internal" href="../reference/api/tac.platform.html#tac.platform.protocol.Register" title="tac.platform.protocol.Register"><code class="xref py py-class docutils literal notranslate"><span class="pre">Register</span></code></a> message to the controller agent.</p>
<p>The message <a class="reference internal" href="../reference/api/tac.platform.html#tac.platform.protocol.Register" title="tac.platform.protocol.Register"><code class="xref py py-class docutils literal notranslate"><span class="pre">Register</span></code></a> is an empty message. In order to undo the effect of
the registration, the agent can unregister from the competition by sending the <a class="reference internal" href="../reference/api/tac.platform.html#tac.platform.protocol.Unregister" title="tac.platform.protocol.Unregister"><code class="xref py py-class docutils literal notranslate"><span class="pre">Unregister</span></code></a>
message.</p>
<div class="figure align-center" id="id4">

            <style>
            /* mermaid issue 527 workaround */
            .section {
                opacity: 1.0 !important;
            }
            </style>
            <div class="mermaid">
            sequenceDiagram
	participant Agent
    participant OEF
    participant Controller

    activate Controller
    Agent-&gt;&gt;Controller: Message{Register{}}
    deactivate Controller
        </div><p class="caption"><span class="caption-text">an agent registers to TAC.</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
<div class="section" id="start-of-the-competition">
<h2>Start of the competition<a class="headerlink" href="#start-of-the-competition" title="Permalink to this headline">¶</a></h2>
<p>Once trading agents receive the <a class="reference internal" href="../reference/api/tac.platform.html#tac.platform.protocol.GameData" title="tac.platform.protocol.GameData"><code class="xref py py-class docutils literal notranslate"><span class="pre">GameData</span></code></a> message, the competition starts
and the <em>trading phase</em> begins.</p>
<p>The message <a class="reference internal" href="../reference/api/tac.platform.html#tac.platform.protocol.GameData" title="tac.platform.protocol.GameData"><code class="xref py py-class docutils literal notranslate"><span class="pre">GameData</span></code></a> contains the following information:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">money</span></code> (integer): the money amount available to the TAC agent.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">endowment</span></code> (list of integers): the endowment for every good.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">utility_params</span></code> (list of floats): the utility parameters for every good.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nb_agents</span></code> (integer): the number of agents in the competition.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nb_goods</span></code> (integer): the number of goods in the competition.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tx_fee</span></code> (float): the transaction fee for every trade.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">agent_pbk_to_name</span></code> (dictionary[string, string]): mapping the public key of each agent to its name.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">good_pbk_to_name</span></code> (dictionary[string, string]): mapping the public key of each good to its name.</p></li>
</ul>
</div>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>In the following, a transition diagram that sumarize the <em>registration phase</em>:</p>
<div class="figure align-center" id="id5">

            <style>
            /* mermaid issue 527 workaround */
            .section {
                opacity: 1.0 !important;
            }
            </style>
            <div class="mermaid">
            sequenceDiagram
	participant Agent_1
	participant Agent_2
	participant Agent_3
    participant OEF
    participant Controller

    Note over OEF: For the sake of brevity, assume that messages sent between agents are in fact sent through the OEF.

    Controller-&gt;&gt;OEF: register_service(&quot;tac&quot;)
    Controller-&gt;&gt;Controller: run()
    activate Controller

    Agent_1-&gt;&gt;OEF: search_services(&quot;tac&quot;)
    Agent_2-&gt;&gt;OEF: search_services(&quot;tac&quot;)
    Agent_3-&gt;&gt;OEF: search_services(&quot;tac&quot;)

    OEF-&gt;&gt;Agent_1: search result: [Controller]
    OEF-&gt;&gt;Agent_2: search result: [Controller]
    OEF-&gt;&gt;Agent_3: search result: [Controller]

    Agent_1-&gt;&gt;Controller: Register()
    Agent_2-&gt;&gt;Controller: Register()
    Agent_3-&gt;&gt;Controller: Register()

    Note over Controller: When at least N TAC agents will be registered for the competition, generate a Game instance and send details to the participants.

    Controller-&gt;&gt;Agent_1: GameData(money, endowment, utility_params, nb_agents, nb_goods, tx_fee, agent_pbks, agent_names, good_pbks)
    Controller-&gt;&gt;Agent_2: GameData(money, endowment, utility_params, nb_agents, nb_goods, tx_fee, agent_pbks, agent_names, good_pbks)
    Controller-&gt;&gt;Agent_3: GameData(money, endowment, utility_params, nb_agents, nb_goods, tx_fee, agent_pbks, agent_names, good_pbks)
    
    deactivate Controller
        </div><p class="caption"><span class="caption-text">The transition diagram for the registration phase.</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h3><a href="../index.html">Table of Contents</a></h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Registration Phase</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#setup-of-the-controller-agent">Setup of the controller agent</a></li>
<li class="toctree-l2"><a class="reference internal" href="#register-as-tac-service">Register as ‘tac’ service</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-to-register-unregister">How to register/unregister</a></li>
<li class="toctree-l2"><a class="reference internal" href="#start-of-the-competition">Start of the competition</a></li>
<li class="toctree-l2"><a class="reference internal" href="#summary">Summary</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="trading_phase.html">Trading Phase</a></li>
<li class="toctree-l1"><a class="reference internal" href="controller_protocol.html">Protocol for the Controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="baseline_agent.html">Baseline Agent v1</a></li>
<li class="toctree-l1"><a class="reference internal" href="develop_agent.html">Developing Your Own Agent</a></li>
<li class="toctree-l1"><a class="reference internal" href="negotiation_guide.html">Step-by-step agent negotiation</a></li>
<li class="toctree-l1"><a class="reference internal" href="agent_state_management_guide.html">Step-by-step agent state management</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/api/tac.html">tac package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/api/modules.html">tac</a></li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="introduction.html" title="previous chapter">Introduction</a></li>
      <li>Next: <a href="trading_phase.html" title="next chapter">Trading Phase</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Fetch.AI.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/sections/registration_phase.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>